(self.webpackChunktomp=self.webpackChunktomp||[]).push([[9343],{46069:function(y,f,a){"use strict";a.r(f);var l=a(58024),E=a(39144),i=a(49111),o=a(19650),P=a(57663),M=a(71577),x=a(77883),O=a(48835),B=a(47673),v=a(4107),g=a(11849),b=a(34792),p=a(48086),F=a(9715),r=a(86585),t=a(2824),n=a(67294),c=a(2489),e=a(79278),u=a(67265),s=a(85893),U=function(Z){var _=parseInt(Z.match.params.id),S=_?"\u7F16\u8F91":"\u65B0\u589E";console.log(S,"action");var K=r.Z.useForm(),R=(0,t.Z)(K,1),D=R[0],W=(0,n.useState)(!1),A=(0,t.Z)(W,2),j=A[0],C=A[1],w=(0,n.useState)(!1),L=(0,t.Z)(w,2),$=L[0],T=L[1],I=function(){c.m8.goBack()},k=function(){D.validateFields().then(function(m){if(console.log(m,"values"),["0.0.0.0","127.0.0.1"].includes(m.serverIp)){p.default.error("\u4FDD\u5B58\u5931\u8D25\uFF0C".concat(m.serverIp,"\u4E0D\u5141\u8BB8\u65B0\u589E"));return}T(!0);var G=_?(0,e.XQ)(_,(0,g.Z)((0,g.Z)({},m),{},{id:_})):(0,e.rl)(m);G.then(function(h){h.code===0?(p.default.success("\u4FDD\u5B58\u6210\u529F"),I()):h.msg&&p.default.error(h.msg)}).catch(function(h){p.default.error(h)}).finally(function(){T(!1)})}).catch(function(m){console.error(m,"error")})};return(0,n.useEffect)(function(){_&&(C(!0),(0,e.vz)(_).then(function(d){console.log(d,"res"),d.code===0?(D.setFieldsValue(d.data),C(!1)):d.msg&&p.default.error(d.msg)}).catch(function(d){p.default.error(d)}))},[_,D]),(0,s.jsx)(u.ZP,{"data-inspector-line":"82","data-inspector-column":"4","data-inspector-relative-path":"src/pages/ServerManage/Inspection/EditMachine/index.tsx",onBack:I,loading:j,title:"".concat(S,"\u673A\u5668"),children:(0,s.jsx)(E.Z,{"data-inspector-line":"83","data-inspector-column":"6","data-inspector-relative-path":"src/pages/ServerManage/Inspection/EditMachine/index.tsx",children:(0,s.jsxs)(E.Z,{"data-inspector-line":"84","data-inspector-column":"8","data-inspector-relative-path":"src/pages/ServerManage/Inspection/EditMachine/index.tsx",style:{margin:"0 0 16px",width:"80%"},bodyStyle:{display:"flex",flexDirection:"column",justifyContent:"center",paddingBottom:0},bordered:!1,children:[(0,s.jsxs)(r.Z,{"data-inspector-line":"94","data-inspector-column":"10","data-inspector-relative-path":"src/pages/ServerManage/Inspection/EditMachine/index.tsx",form:D,style:{width:"100%"},labelCol:{span:3},children:[(0,s.jsx)(r.Z.Item,{"data-inspector-line":"95","data-inspector-column":"12","data-inspector-relative-path":"src/pages/ServerManage/Inspection/EditMachine/index.tsx",name:"serverIp",label:"ip",labelAlign:"left",rules:[{required:!0},{pattern:/^((25[0-5]|2[0-4]\d|((1\d{2})|([1-9]?\d)))\.){3}(25[0-5]|2[0-4]\d|((1\d{2})|([1-9]?\d)))$/,message:"ip\u683C\u5F0F\u4E0D\u6B63\u786E"}],children:(0,s.jsx)(v.Z,{"data-inspector-line":"109","data-inspector-column":"14","data-inspector-relative-path":"src/pages/ServerManage/Inspection/EditMachine/index.tsx",placeholder:"\u8BF7\u8F93\u5165ip",maxLength:15})},"serverIp"),(0,s.jsx)(r.Z.Item,{"data-inspector-line":"111","data-inspector-column":"12","data-inspector-relative-path":"src/pages/ServerManage/Inspection/EditMachine/index.tsx",name:"supervisorPort",label:"\u7AEF\u53E3",labelAlign:"left",rules:[{required:!0},{pattern:/^([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-4]\d{3}|65[0-4]\d{2}|655[0-2]\d|6553[0-5])$/,message:"\u7AEF\u53E3\u683C\u5F0F\u4E0D\u6B63\u786E"}],children:(0,s.jsx)(O.Z,{"data-inspector-line":"125","data-inspector-column":"14","data-inspector-relative-path":"src/pages/ServerManage/Inspection/EditMachine/index.tsx",style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u7AEF\u53E3",maxLength:5})},"supervisorPort"),(0,s.jsx)(r.Z.Item,{"data-inspector-line":"127","data-inspector-column":"12","data-inspector-relative-path":"src/pages/ServerManage/Inspection/EditMachine/index.tsx",name:"supervisorUsername",label:"\u8D26\u53F7",labelAlign:"left",rules:[{required:!0},{pattern:/^[^\u4E00-\u9FFF\s]+$/,message:"\u8D26\u53F7\u683C\u5F0F\u4E0D\u6B63\u786E"}],children:(0,s.jsx)(v.Z,{"data-inspector-line":"140","data-inspector-column":"14","data-inspector-relative-path":"src/pages/ServerManage/Inspection/EditMachine/index.tsx",autoComplete:"off",placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7",maxLength:20})},"supervisorUsername"),(0,s.jsx)(r.Z.Item,{"data-inspector-line":"142","data-inspector-column":"12","data-inspector-relative-path":"src/pages/ServerManage/Inspection/EditMachine/index.tsx",name:"supervisorPass",label:"\u5BC6\u7801",labelAlign:"left",rules:[{required:!0},{pattern:/^[^\u4E00-\u9FFF\s]+$/,message:"\u5BC6\u7801\u683C\u5F0F\u4E0D\u6B63\u786E"}],children:(0,s.jsx)(v.Z.Password,{"data-inspector-line":"155","data-inspector-column":"14","data-inspector-relative-path":"src/pages/ServerManage/Inspection/EditMachine/index.tsx",autoComplete:"off",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",maxLength:20})},"supervisorPass")]}),(0,s.jsx)("div",{"data-inspector-line":"158","data-inspector-column":"10","data-inspector-relative-path":"src/pages/ServerManage/Inspection/EditMachine/index.tsx",style:{color:"#85D4F8",height:40},children:"\u63D0\u793A\uFF1A\u8BF7\u8F93\u5165\u5DF2\u5B58\u5728\u7684\u673A\u5668\u7684ip\u548C\u7AEF\u53E3\u3002"}),(0,s.jsxs)(o.Z,{"data-inspector-line":"159","data-inspector-column":"10","data-inspector-relative-path":"src/pages/ServerManage/Inspection/EditMachine/index.tsx",children:[(0,s.jsx)(M.Z,{"data-inspector-line":"160","data-inspector-column":"12","data-inspector-relative-path":"src/pages/ServerManage/Inspection/EditMachine/index.tsx",onClick:I,children:"\u53D6\u6D88"},"cancel"),(0,s.jsx)(M.Z,{"data-inspector-line":"163","data-inspector-column":"12","data-inspector-relative-path":"src/pages/ServerManage/Inspection/EditMachine/index.tsx",loading:$,type:"primary",onClick:k,children:"\u4FDD\u5B58"},"save")]})]})})})};f.default=U},79278:function(y,f,a){"use strict";a.d(f,{x:function(){return P},vz:function(){return M},rl:function(){return x},XQ:function(){return O},sV:function(){return B},Gl:function(){return v},X1:function(){return g},FF:function(){return b},Mv:function(){return p},fN:function(){return F}});var l=a(3182),E=a(94043),i=a.n(E),o=a(58075),P=function(){var r=(0,l.Z)(i().mark(function t(n){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.kO)("/soms/server/list",{method:"GET",params:n}));case 1:case"end":return e.stop()}},t)}));return function(n){return r.apply(this,arguments)}}(),M=function(){var r=(0,l.Z)(i().mark(function t(n){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.kO)("/soms/server/".concat(n),{method:"GET"}));case 1:case"end":return e.stop()}},t)}));return function(n){return r.apply(this,arguments)}}(),x=function(){var r=(0,l.Z)(i().mark(function t(n){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.kO)("/soms/server",{method:"POST",data:n}));case 1:case"end":return e.stop()}},t)}));return function(n){return r.apply(this,arguments)}}(),O=function(){var r=(0,l.Z)(i().mark(function t(n,c){return i().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,o.kO)("/soms/server/".concat(n),{method:"PUT",data:c}));case 1:case"end":return u.stop()}},t)}));return function(n,c){return r.apply(this,arguments)}}(),B=function(){var r=(0,l.Z)(i().mark(function t(n){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.kO)("/soms/server/".concat(n),{method:"DELETE"}));case 1:case"end":return e.stop()}},t)}));return function(n){return r.apply(this,arguments)}}(),v=function(){var r=(0,l.Z)(i().mark(function t(n){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.kO)("/soms/server/services/".concat(n),{method:"GET"}));case 1:case"end":return e.stop()}},t)}));return function(n){return r.apply(this,arguments)}}(),g=function(){var r=(0,l.Z)(i().mark(function t(n,c,e){return i().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,o.kO)("/soms/server/serviceops/".concat(n),{method:"POST",data:{id:n,ops:c,names:e}}));case 1:case"end":return s.stop()}},t)}));return function(n,c,e){return r.apply(this,arguments)}}(),b=function(){var r=(0,l.Z)(i().mark(function t(n){return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,o.kO)("/soms/server/services",{method:"POST",data:n}));case 1:case"end":return e.stop()}},t)}));return function(n){return r.apply(this,arguments)}}(),p=function(){var r=(0,l.Z)(i().mark(function t(n,c){return i().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,o.kO)("/soms/server/service/batchops/".concat(n),{method:"POST",data:{id:n,ops:c},timeout:6e4}));case 1:case"end":return u.stop()}},t)}));return function(n,c){return r.apply(this,arguments)}}(),F=function(){var r=(0,l.Z)(i().mark(function t(n,c,e){return i().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,o.kO)("/soms/server/service/batchops",{method:"POST",data:{ids:n,ops:c,name:e}}));case 1:case"end":return s.stop()}},t)}));return function(n,c,e){return r.apply(this,arguments)}}()}}]);
