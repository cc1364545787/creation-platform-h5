(self.webpackChunktomp=self.webpackChunktomp||[]).push([[475],{37598:function(ie,P,t){"use strict";var v=t(11849),b=t(22542),o=t(85893),l=function(T){var L={search:!1,options:!1,pagination:{defaultPageSize:15,pageSizeOptions:["15","30","50"],showSizeChanger:!0}};return(0,o.jsx)(b.ZP,(0,v.Z)({"data-inspector-line":"21","data-inspector-column":"9","data-inspector-relative-path":"src/components/CustomProTable/index.tsx"},Object.assign({},L,T)))};P.Z=l},15046:function(ie,P,t){"use strict";var v=t(2824),b=t(11849),o=t(67294),l=t(30381),A=t.n(l),T=t(14877),L=t(34540),R=t(85893),J={tooltip:!0,tooltipText:"",label:"\u65F6\u95F4",name:void 0,defaultValue:null,defaultRangeValue:{unit:"hour",value:1},formatTemplate:"YYYY.MM.DD HH:mm",disabledDays:30,placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],showTime:{showHour:!0,showMinute:!0},onChange:function(){}},O=function(n,r){var e=(0,b.Z)((0,b.Z)({},J),n),s=function(d){return(0,T.Vb)(d,"YYYY-MM-DD HH:mm")},a=function(){var d,x,B,N,K,u;return Array.isArray(e.defaultRangeValue)?[s(A()()).subtract((d=e.defaultRangeValue[0])===null||d===void 0?void 0:d.value,(x=e.defaultRangeValue[0])===null||x===void 0?void 0:x.unit),s(A()()).subtract((B=e.defaultRangeValue[1])===null||B===void 0?void 0:B.value,(N=e.defaultRangeValue[1])===null||N===void 0?void 0:N.unit)]:[s(A()()).subtract((K=e.defaultRangeValue)===null||K===void 0?void 0:K.value,(u=e.defaultRangeValue)===null||u===void 0?void 0:u.unit),s(A()())]},_=(0,o.useState)(e.defaultValue),w=(0,v.Z)(_,2),y=w[0],E=w[1],f=(0,o.useState)([]),C=(0,v.Z)(f,2),S=C[0],F=C[1],k=(0,o.useState)(),ne=(0,v.Z)(k,2),q=ne[0],$=ne[1],ee=function(d){return(0,T.Q8)(d,S||[],e.disabledDays)},Z=function(d){return(0,T.d0)(d,S||[],e.disabledDays)},H=function(d){d?($([]),F([])):$(void 0)},re=function(d){F(d.map(function(x){return x&&s(x)}))},g=function(d){var x,B,N=(d==null||(x=d.map)===null||x===void 0?void 0:x.call(d,function(K){return K&&s(K)}))||a();E(N),(B=e.onChange)===null||B===void 0||B.call(e,N)};return(0,o.useImperativeHandle)(r,function(){return{value:y,setValue:E}}),(0,o.useEffect)(function(){if(!Array.isArray(e.defaultValue)||!Array.isArray(y)){var m,d=a();(m=e.onChange)===null||m===void 0||m.call(e,d),E(d)}},[]),(0,o.useMemo)(function(){return(0,R.jsx)(L.Z,{"data-inspector-line":"127","data-inspector-column":"6","data-inspector-relative-path":"src/components/LimitRangePicker/index.tsx",tooltip:e.tooltip?e.tooltipText||"\u65E5\u671F\u8DE8\u5EA6\u4E0D\u80FD\u8D85\u8FC7".concat(e.disabledDays,"\u5929"):void 0,label:e.label,name:e.name,allowClear:!0,fieldProps:{placeholder:e.placeholder,showTime:Object.assign({},e.showTime,{defaultValue:[(y==null?void 0:y[0])||A()(),(y==null?void 0:y[0])||A()()]}),allowClear:!1,value:q||y,format:e.formatTemplate,disabledDate:ee,disabledTime:Z,onCalendarChange:re,onChange:g,onOpenChange:H}})},[q,y,S])};P.Z=(0,o.forwardRef)(O)},16684:function(ie,P,t){"use strict";t.r(P),t.d(P,{default:function(){return Ue}});var v=t(13254),b=t(14277),o=t(58024),l=t(39144),A=t(13062),T=t(71230),L=t(89032),R=t(15746),J=t(57663),O=t(71577),p=t(22385),n=t(69713),r=t(3182),e=t(11849),s=t(34792),a=t(48086),_=t(2824),w=t(94043),y=t.n(w),E=t(67294),f=t(2489),C=t(80129),S=t.n(C),F=t(78718),k=t.n(F),ne=t(44656),q=function(){var j=(0,E.useState)([]),h=(0,_.Z)(j,2),W=h[0],M=h[1];return(0,E.useEffect)(function(){(0,ne.AY)({data:{page:0,limit:1e4,licenseId:0}}).then(function(G){var te=G.data||{},se=te.dataList,I=se===void 0?[]:se,z=I.map(function(X){return{label:X.appName,value:String(X.appId)}});M(z)})},[]),W},$=t(94617),ee=t(30381),Z=t.n(ee),H=t(68438),re=function(j){var h=f.m8.location.query,W=(0,E.useState)(j?h.appId:""),M=(0,_.Z)(W,2),G=M[0],te=M[1],se=(0,E.useState)(j?h.roomId:""),I=(0,_.Z)(se,2),z=I[0],X=I[1],_e=(0,E.useState)(j?h.userId:""),ce=(0,_.Z)(_e,2),ge=ce[0],he=ce[1],oe=(0,E.useState)(j&&Z()(Number(h.startTime)).isValid()&&Z()(Number(h.endTime)).isValid()?[Z()(Number(h.startTime)),Z()(Number(h.endTime))]:[Z()().subtract(1,"hours"),Z()()]),pe=(0,_.Z)(oe,2),ye=pe[0],Ee=pe[1],ae={qsMap:h,appId:G,roomId:z,userId:ge,dateValue:ye},ue={setAppId:te,setRoomId:X,setUserId:he,setDateValue:Ee};return[ae,ue]},g=function(j){return[function(){return j?(0,H.N8)("QualityOperation-userAnalysis-AUTO_SELECT_MEMO_APP"):void 0},function(h){h&&(0,H.Rh)(h,"QualityOperation-userAnalysis-AUTO_SELECT_MEMO_APP")},function(){(0,H.zj)("QualityOperation-userAnalysis-AUTO_SELECT_MEMO_APP")}]},m=t(67265),d=t(64317),x=t(5966),B=t(37598),N=t(15046),K=t(1870),u=t(85893),ve,de=((ve=window.__OMP__BUSINESS__CONF__)===null||ve===void 0?void 0:ve.QUALITY_OPERATION)||{},Y=de.REFRESH_FILTER_RESET,Re=de.AUTO_SELECT_FIRST_APP,Te=de.AUTO_SELECT_MEMO_APP,Me=de.SHOW_WATERMARK,Ie=function(){var j=re(!Y),h=(0,_.Z)(j,2),W=h[0],M=W.qsMap,G=W.appId,te=W.roomId,se=W.userId,I=W.dateValue,z=h[1],X=z.setAppId,_e=z.setRoomId,ce=z.setUserId,ge=z.setDateValue,he=g(Te),oe=(0,_.Z)(he,3),pe=oe[0],ye=oe[1],Ee=oe[2],ae=q(),ue=(0,E.useRef)(),Oe=pe(),Ce=function(){var i,c,U,Q;if(!te){a.default.warn("\u623F\u95F4ID\u5FC5\u586B");return}(i=ue.current)===null||i===void 0||(c=i.reload)===null||c===void 0||c.call(i),(U=ue.current)===null||U===void 0||(Q=U.setPageInfo)===null||Q===void 0||Q.call(U,{current:1})},Se=function(i){X(i),Te&&(i?ye(i):Ee()),Y||f.m8.replace({query:(0,e.Z)((0,e.Z)({},M),{},{appId:i})})},Le=function(i){var c=i.target.value;_e(c),Y||f.m8.replace({query:(0,e.Z)((0,e.Z)({},M),{},{roomId:c})})},Ze=function(i){var c=i.target.value;ce(c),Y||f.m8.replace({query:(0,e.Z)((0,e.Z)({},M),{},{userId:c})})},je=function(i){i&&i[0]&&i[1]&&(ge(i),Y||f.m8.replace({query:(0,e.Z)((0,e.Z)({},M),{},{startTime:String(i[0].unix()*1e3),endTime:String(i[1].unix()*1e3)})}))},Ve=function(){var V=(0,r.Z)(y().mark(function i(){var c,U,Q,Ae,me,xe,De,le,Pe,be;return y().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(me=[],xe=!1,De={appId:G,roomId:te,userId:se||"",startTime:"".concat(I==null||(c=I[0])===null||c===void 0||(U=c.unix)===null||U===void 0?void 0:U.call(c),"000000000"),endTime:"".concat(I==null||(Q=I[1])===null||Q===void 0||(Ae=Q.unix)===null||Ae===void 0?void 0:Ae.call(Q),"000000000")},D.prev=3,!(G&&te)){D.next=9;break}return D.next=7,(0,$.uj)(De);case 7:le=D.sent,le.code===0?(Pe=le.data||{},be=Pe.dataList,me=be||[],xe=!0):le.msg&&a.default.error(le.msg);case 9:D.next=14;break;case 11:D.prev=11,D.t0=D.catch(3),console.error(D.t0);case 14:return D.abrupt("return",{data:me,total:me.length,success:xe});case 15:case"end":return D.stop()}},i,null,[[3,11]])}));return function(){return V.apply(this,arguments)}}(),Qe=function(i){var c=i.wLoginTime,U=i.wLogoutTime,Q=(0,e.Z)((0,e.Z)({},k()(i,["appId","userId","roomId","roomSid","roomUserSessionId"])),{},{startTime:c,endTime:U});f.m8.push("/quality-operation/analysis-detail?".concat(S().stringify(Q)))},we=[{title:"\u623F\u95F4ID",dataIndex:"roomId",width:200,ellipsis:!0},{title:"\u7528\u6237ID",dataIndex:"userId"},{title:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("span",{"data-inspector-line":"160","data-inspector-column":"10","data-inspector-relative-path":"src/pages/QualityOperation/UserAnalysis/index.tsx",children:"\u8D77\u6B62\u65F6\u95F4"}),(0,u.jsx)(n.Z,{"data-inspector-line":"161","data-inspector-column":"10","data-inspector-relative-path":"src/pages/QualityOperation/UserAnalysis/index.tsx",placement:"top",title:"\u53D6\u51B3\u4E8E\u8BBE\u5907\u7CFB\u7EDF\u65F6\u95F4",children:(0,u.jsx)(K.Z,{"data-inspector-line":"162","data-inspector-column":"12","data-inspector-relative-path":"src/pages/QualityOperation/UserAnalysis/index.tsx",style:{marginLeft:4}})})]}),dataIndex:"startTime",ellipsis:!0,render:function(i,c){return"".concat(c.startTime,"-").concat(c.endTime)}},{title:"\u64CD\u4F5C",width:100,align:"center",ellipsis:!0,render:function(i,c){return(0,u.jsx)("div",{"data-inspector-line":"179","data-inspector-column":"10","data-inspector-relative-path":"src/pages/QualityOperation/UserAnalysis/index.tsx",children:(0,u.jsx)(O.Z,{"data-inspector-line":"180","data-inspector-column":"12","data-inspector-relative-path":"src/pages/QualityOperation/UserAnalysis/index.tsx",type:"link",onClick:function(){return Qe(c)},children:"\u67E5\u770B"})})}}];return(0,E.useEffect)(function(){Oe?X(Oe):Re&&ae&&ae[0]&&X(ae[0].value)},[ae]),(0,u.jsx)(m.ZP,{"data-inspector-line":"203","data-inspector-column":"4","data-inspector-relative-path":"src/pages/QualityOperation/UserAnalysis/index.tsx",waterMarkProps:Me?void 0:{},header:{breadcrumb:{routes:[{path:"/quality-operation",breadcrumbName:"\u8D28\u91CF\u8FD0\u8425"},{path:"/quality-operation/user-analysis",breadcrumbName:"\u7528\u6237\u5206\u6790"}],itemRender:function(i){var c=f.m8.location.pathname===i.path||f.m8.location.pathname===i.path+"/";return(0,u.jsx)("span",{"data-inspector-line":"222","data-inspector-column":"14","data-inspector-relative-path":"src/pages/QualityOperation/UserAnalysis/index.tsx",style:{cursor:"pointer"},onClick:function(){return!c&&f.m8.push(i.path)},children:i.breadcrumbName})}}},children:(0,u.jsxs)(l.Z,{"data-inspector-line":"233","data-inspector-column":"6","data-inspector-relative-path":"src/pages/QualityOperation/UserAnalysis/index.tsx",children:[(0,u.jsx)(l.Z,{"data-inspector-line":"234","data-inspector-column":"8","data-inspector-relative-path":"src/pages/QualityOperation/UserAnalysis/index.tsx",style:{marginBottom:"16px"},bordered:!1,bodyStyle:{paddingBottom:0},children:(0,u.jsxs)(T.Z,{"data-inspector-line":"235","data-inspector-column":"10","data-inspector-relative-path":"src/pages/QualityOperation/UserAnalysis/index.tsx",gutter:32,children:[(0,u.jsx)(R.Z,{"data-inspector-line":"236","data-inspector-column":"12","data-inspector-relative-path":"src/pages/QualityOperation/UserAnalysis/index.tsx",span:6,xxl:{span:4},children:(0,u.jsx)(d.Z,{"data-inspector-line":"237","data-inspector-column":"14","data-inspector-relative-path":"src/pages/QualityOperation/UserAnalysis/index.tsx",label:"\u5E94\u7528",allowClear:!0,options:ae,fieldProps:{defaultValue:Y?void 0:M.appId,value:G||void 0,placeholder:"\u8BF7\u9009\u62E9\u5E94\u7528",onChange:Se}})}),(0,u.jsx)(R.Z,{"data-inspector-line":"249","data-inspector-column":"12","data-inspector-relative-path":"src/pages/QualityOperation/UserAnalysis/index.tsx",span:8,xxl:{span:6},children:(0,u.jsx)(x.Z,{"data-inspector-line":"250","data-inspector-column":"14","data-inspector-relative-path":"src/pages/QualityOperation/UserAnalysis/index.tsx",tooltip:"\u623F\u95F4ID\u5FC5\u586B",label:"\u623F\u95F4ID",allowClear:!0,fieldProps:{defaultValue:Y?void 0:M.roomId,placeholder:"\u8BF7\u8F93\u5165\u623F\u95F4ID",onChange:Le}})}),(0,u.jsx)(R.Z,{"data-inspector-line":"261","data-inspector-column":"12","data-inspector-relative-path":"src/pages/QualityOperation/UserAnalysis/index.tsx",span:8,xxl:{span:6},children:(0,u.jsx)(x.Z,{"data-inspector-line":"262","data-inspector-column":"14","data-inspector-relative-path":"src/pages/QualityOperation/UserAnalysis/index.tsx",label:"\u7528\u6237ID",allowClear:!0,fieldProps:{defaultValue:Y?void 0:M.userId,placeholder:"\u8BF7\u8F93\u5165\u7528\u6237ID",onChange:Ze}})}),(0,u.jsx)(R.Z,{"data-inspector-line":"272","data-inspector-column":"12","data-inspector-relative-path":"src/pages/QualityOperation/UserAnalysis/index.tsx",children:(0,u.jsx)(N.Z,{"data-inspector-line":"273","data-inspector-column":"14","data-inspector-relative-path":"src/pages/QualityOperation/UserAnalysis/index.tsx",defaultValue:I,tooltip:!1,disabledDays:1,onChange:je})}),(0,u.jsx)(R.Z,{"data-inspector-line":"280","data-inspector-column":"12","data-inspector-relative-path":"src/pages/QualityOperation/UserAnalysis/index.tsx",children:(0,u.jsx)(O.Z,{"data-inspector-line":"281","data-inspector-column":"14","data-inspector-relative-path":"src/pages/QualityOperation/UserAnalysis/index.tsx",type:"primary",onClick:Ce,children:"\u641C\u7D22"})})]})}),G?(0,u.jsx)(B.Z,{"data-inspector-line":"288","data-inspector-column":"10","data-inspector-relative-path":"src/pages/QualityOperation/UserAnalysis/index.tsx",actionRef:ue,search:!1,request:Ve,options:!1,rowKey:"wLoginTime",columns:we}):(0,u.jsx)(b.Z,{"data-inspector-line":"297","data-inspector-column":"10","data-inspector-relative-path":"src/pages/QualityOperation/UserAnalysis/index.tsx",description:"\u8BF7\u5148\u8F93\u5165\u67E5\u8BE2\u6761\u4EF6"})]})})},Ue=Ie},44656:function(ie,P,t){"use strict";t.d(P,{AY:function(){return T}});var v=t(11849),b=t(3182),o=t(94043),l=t.n(o),A=t(58075),T=function(){var n=(0,b.Z)(l().mark(function r(e){return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,A.kO)("/soms/application/list",(0,v.Z)({method:"POST"},e)));case 1:case"end":return a.stop()}},r)}));return function(e){return n.apply(this,arguments)}}(),L=null,R=null,J=null,O=null,p=null},94617:function(ie,P,t){"use strict";t.d(P,{uj:function(){return A},h:function(){return T},AR:function(){return L},ah:function(){return R},IP:function(){return J},Vt:function(){return O},X7:function(){return p}});var v=t(3182),b=t(94043),o=t.n(b),l=t(58075),A=function(){var n=(0,v.Z)(o().mark(function r(e){return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,l.kO)("/soms/speed/user/list",{method:"POST",data:e}));case 1:case"end":return a.stop()}},r)}));return function(e){return n.apply(this,arguments)}}(),T=function(){var n=(0,v.Z)(o().mark(function r(e){return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,l.kO)("/soms/speed/user",{method:"POST",data:e}));case 1:case"end":return a.stop()}},r)}));return function(e){return n.apply(this,arguments)}}(),L=function(){var n=(0,v.Z)(o().mark(function r(e){return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,l.kO)("/soms/speed/stream/list",{method:"POST",data:e}));case 1:case"end":return a.stop()}},r)}));return function(e){return n.apply(this,arguments)}}(),R=function(){var n=(0,v.Z)(o().mark(function r(e){return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,l.kO)("/soms/speed/quality/pub/list",{method:"POST",data:e}));case 1:case"end":return a.stop()}},r)}));return function(e){return n.apply(this,arguments)}}(),J=function(){var n=(0,v.Z)(o().mark(function r(e){return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,l.kO)("/soms/speed/quality/play/list",{method:"POST",data:e}));case 1:case"end":return a.stop()}},r)}));return function(e){return n.apply(this,arguments)}}(),O=function(){var n=(0,v.Z)(o().mark(function r(e){return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,l.kO)("/soms/speed/quality/play/list",{method:"POST",data:e,responseType:"blob"}));case 1:case"end":return a.stop()}},r)}));return function(e){return n.apply(this,arguments)}}(),p=function(){var n=(0,v.Z)(o().mark(function r(e){return o().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,l.kO)("/soms/speed/quality/pub/list",{method:"POST",data:e,responseType:"blob"}));case 1:case"end":return a.stop()}},r)}));return function(e){return n.apply(this,arguments)}}()},14877:function(ie,P,t){"use strict";t.d(P,{Vb:function(){return l},Q8:function(){return A},d0:function(){return T},FK:function(){return L},Uq:function(){return R},KR:function(){return J}});var v=t(2824),b=t(30381),o=t.n(b),l=function(p){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"YYYY-MM-DD";return o()(p.format(n))},A=function(p,n,r){var e=(0,v.Z)(n,2),s=e[0],a=e[1];if(!s&&!a)return!1;var _=s&&l(p).diff(l(s),"days")>r-1,w=a&&l(a).diff(l(p),"days")>r-1;return w||_},T=function(p,n,r){var e=(0,v.Z)(n,2),s=e[0],a=e[1],_=function(){return Math.abs(l(p).diff(l(s||a),"days"))},w=p?p.date():void 0,y=p?p.hour():void 0,E=[0,0,0],f=E[0],C=E[1],S=!1;if(s){var F,k;S=!0;var ne=(s==null||(F=s.format("HH:mm"))===null||F===void 0||(k=F.split(":"))===null||k===void 0?void 0:k.map(Number))||[],q=(0,v.Z)(ne,2);f=q[0],C=q[1]}else if(a){var $,ee,Z=(a==null||($=a.format("HH:mm"))===null||$===void 0||(ee=$.split(":"))===null||ee===void 0?void 0:ee.map(Number))||[],H=(0,v.Z)(Z,2);f=H[0],C=H[1]}return{disabledHours:function(){return new Array(24).fill(0).map(function(g,m){return m}).filter(function(g){if((s||a)&&w){var m=_();if(m===0)return S?g<f&&g>-1:g<24&&g>f;if(m===r-1)return S?g>f:g<f}return!1})},disabledMinutes:function(){return new Array(60).fill(0).map(function(g,m){return m}).filter(function(g){if((s||a)&&w){var m=_();if(m===0&&y===f)return S?g<C:g>C;if(m===r-1&&y===f)return S?g>C:g<C}return!1})}}},L=function(p){var n=new Date(p),r=n.getFullYear()+".",e=(n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1)+".",s=n.getDate()<10?"0"+n.getDate():n.getDate();return r+e+s},R=function(p){var n=new Date(p),r=n.getFullYear()+".",e=(n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1)+".",s=(n.getDate()<10?"0"+n.getDate():n.getDate())+" ",a=(n.getHours()<10?"0"+n.getHours():n.getHours())+":",_=n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes();return r+e+s+a+_},J=function(p){return Date.parse(L(p))/1e3}}}]);
