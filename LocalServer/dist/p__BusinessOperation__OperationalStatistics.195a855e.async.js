(self.webpackChunktomp=self.webpackChunktomp||[]).push([[3711],{15976:function(C){C.exports={chartsHeader:"chartsHeader___vqlqD",chartsBody:"chartsBody___3nF4t",tooltip:"tooltip___DPkeg"}},16724:function(C,g,t){"use strict";t.r(g);var It=t(13254),V=t(14277),Rt=t(58024),T=t(39144),Ut=t(49111),H=t(19650),Wt=t(57663),N=t(71577),Kt=t(89032),E=t(15746),B=t(11849),G=t(93224),St=t(34792),L=t(48086),y=t(3182),u=t(2824),Q=t(94043),D=t.n(Q),c=t(67294),z=t(40041),J=t(15976),X=t.n(J),w=t(30097),k=t(67265),q=t(64317),tt=t(34540),at=t(30381),m=t.n(at),et=t(44656),h=t(80549),p=t(14877),st=t(28617),s=t(85893),nt=function(){var rt=(0,c.useState)([m()().subtract(7,"days"),m()().subtract(1,"days")]),A=(0,u.Z)(rt,2),o=A[0],it=A[1],ot=(0,c.useState)([]),I=(0,u.Z)(ot,2),lt=I[0],R=I[1],_t=(0,c.useState)(),U=(0,u.Z)(_t,2),dt=U[0],W=U[1],ut="YYYY.MM.DD",ct=(0,c.useState)(),K=(0,u.Z)(ct,2),i=K[0],pt=K[1],O=function(a){return a&&(0,p.Vb)(a)},S=180,mt=function(a){R(a.map(O))},vt=function(){return[O(m()()).subtract(2,"days"),O(m()()).subtract(1,"days")]},Et=function(a){a?(W([]),R([])):W(void 0)},Dt=function(a){it(a.map(O)||vt())},Ot=function(){var e=(0,y.Z)(D().mark(function a(){var _,n,r,d;return D().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,et.AY)({data:{page:0,limit:1e4,licenseId:0}});case 2:return _=l.sent,n=_.data||{},r=n.dataList,d=r===void 0?[]:r,l.abrupt("return",d.map(function(v){return{label:v.appName,value:v.appId}}));case 5:case"end":return l.stop()}},a)}));return function(){return e.apply(this,arguments)}}(),ft=(0,c.useState)(),b=(0,u.Z)(ft,2),M=b[0],Pt=b[1],ht=function(){var e=(0,y.Z)(D().mark(function a(){var _;return D().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return _=i+"\u8FD0\u8425\u6570\u636E\u7EDF\u8BA1"+(0,p.FK)(o[0])+"-"+(0,p.FK)(o[1]),r.next=3,(0,w.Nk)({data:{cmds:"100,200",appId:(i==null?void 0:i.toString())||"",startTime:(0,p.KR)(o[0]),endTime:(0,p.KR)(o[1]),exportFlag:!0}}).then(function(d){(0,st.r)(d,_)});case 3:case"end":return r.stop()}},a)}));return function(){return e.apply(this,arguments)}}(),Mt=function(){if(i)if(o.length)ht();else{L.default.warn("\u65F6\u95F4\u5FC5\u586B");return}else{L.default.warn("\u8BF7\u9009\u62E9\u5E94\u7528");return}};return(0,c.useEffect)(function(){var e=o[0],a=o[1],_=e.year()===a.year()?"MM.DD":"YYYY.MM.DD";i&&e&&a&&Promise.all([(0,h.vj)({data:{sessionTypes:"0,1",appId:String(i),startTime:e.unix(),endTime:a.unix()}}).then(function(n){return n.code===0?n.data:{}}),(0,h.u7)({data:{cmds:"100,200",appId:String(i),startTime:e.unix(),endTime:a.unix()}}).then(function(n){return n.code===0?n.data:{}}),(0,h.gR)({data:{cmds:"300",appId:String(i),startTime:e.unix(),endTime:a.unix()}}).then(function(n){return n.code===0?n.data:{}})]).then(function(n){var r=(0,u.Z)(n,3),d=r[0],x=r[1],l=r[2],v=d.vrsCtlPlay,xt=v===void 0?[]:v,j=d.vrsCtlPublish,Ct=j===void 0?[]:j,Z=x.roomCreate,gt=Z===void 0?[]:Z,F=x.userLogin,Tt=F===void 0?[]:F,Y=l.startRecord,Bt=Y===void 0?[]:Y;Pt([{title:"\u623F\u95F4\u5206\u5E03",unit:"\u4E2A",raw:gt,success:"normalTotal",fail:"failTotal"},{title:"\u7528\u6237\u5206\u5E03",unit:"\u4E2A",raw:Tt,success:"normalTotal",fail:"failTotal"},{title:"\u63A8\u6D41\u5206\u5E03",unit:"\u6761",raw:Ct,success:"normalTotal",fail:"rejectTotal"},{title:"\u62C9\u6D41\u5206\u5E03",unit:"\u6761",raw:xt,success:"normalTotal",fail:"rejectTotal"},{title:"\u5F55\u5236\u6D41\u5206\u5E03",unit:"\u6761",raw:Bt,success:"normalTotal",fail:"failTotal"}].map(function(f){var $=f.raw,Lt=f.success,yt=f.fail,At=(0,G.Z)(f,["raw","success","fail"]);return(0,B.Z)((0,B.Z)({},At),{},{xAxis:$.map(function(P){return m()(P.reportDate).format(_)}),series:$.map(function(P){return{success:P[Lt],fail:P[yt]}})})}))})},[i,o]),(0,s.jsx)(k.ZP,{"data-inspector-line":"195","data-inspector-column":"4","data-inspector-relative-path":"src/pages/BusinessOperation/OperationalStatistics/index.tsx",children:(0,s.jsxs)(T.Z,{"data-inspector-line":"196","data-inspector-column":"6","data-inspector-relative-path":"src/pages/BusinessOperation/OperationalStatistics/index.tsx",children:[(0,s.jsx)(T.Z,{"data-inspector-line":"197","data-inspector-column":"8","data-inspector-relative-path":"src/pages/BusinessOperation/OperationalStatistics/index.tsx",style:{marginBottom:"16px"},bordered:!1,bodyStyle:{paddingBottom:0},children:(0,s.jsxs)(H.Z,{"data-inspector-line":"198","data-inspector-column":"10","data-inspector-relative-path":"src/pages/BusinessOperation/OperationalStatistics/index.tsx",children:[(0,s.jsx)(E.Z,{"data-inspector-line":"199","data-inspector-column":"12","data-inspector-relative-path":"src/pages/BusinessOperation/OperationalStatistics/index.tsx",children:(0,s.jsx)(q.Z,{"data-inspector-line":"200","data-inspector-column":"14","data-inspector-relative-path":"src/pages/BusinessOperation/OperationalStatistics/index.tsx",label:"\u5E94\u7528",allowClear:!0,width:200,request:Ot,fieldProps:{placeholder:"\u8BF7\u9009\u62E9\u5E94\u7528",onChange:function(a){pt(a)}}})}),(0,s.jsx)(E.Z,{"data-inspector-line":"213","data-inspector-column":"12","data-inspector-relative-path":"src/pages/BusinessOperation/OperationalStatistics/index.tsx",children:(0,s.jsx)(tt.Z,{"data-inspector-line":"214","data-inspector-column":"14","data-inspector-relative-path":"src/pages/BusinessOperation/OperationalStatistics/index.tsx",tooltip:"\u65E5\u671F\u8DE8\u5EA6\u4E0D\u80FD\u8D85\u8FC7".concat(S,"\u5929"),label:"\u65F6\u95F4",allowClear:!0,width:"lg",fieldProps:{placeholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"],allowClear:!1,value:dt||o,format:ut,disabledDate:function(a){return(0,p.Q8)(a,lt||[],S)},onCalendarChange:mt,onChange:Dt,onOpenChange:Et}})}),(0,s.jsx)(E.Z,{"data-inspector-line":"231","data-inspector-column":"12","data-inspector-relative-path":"src/pages/BusinessOperation/OperationalStatistics/index.tsx",style:{marginBottom:"25px",marginLeft:"18px"},children:(0,s.jsx)(N.Z,{"data-inspector-line":"232","data-inspector-column":"14","data-inspector-relative-path":"src/pages/BusinessOperation/OperationalStatistics/index.tsx",type:"primary",onClick:Mt,children:"\u5BFC\u51FA"})})]})}),i?(0,s.jsx)(E.Z,{"data-inspector-line":"239","data-inspector-column":"10","data-inspector-relative-path":"src/pages/BusinessOperation/OperationalStatistics/index.tsx",className:X().chartsBody,children:M&&M.length?M.map(function(e){return(0,s.jsx)(z.Z,{"data-inspector-line":"242","data-inspector-column":"16","data-inspector-relative-path":"src/pages/BusinessOperation/OperationalStatistics/index.tsx",title:[{text:e.title}],xAxis:{type:"category",data:e.xAxis,boundaryGap:!0},yAxis:{type:"value",min:0,max:e.series.length?void 0:100,minInterval:1,name:"(".concat(e.unit,")"),axisLabel:{formatter:"{value}"}},series:[{name:"\u6210\u529F",data:e.series.map(function(a){return a.success}),type:"bar",color:"#51a2ff",barMaxWidth:40,stack:e.title},{name:"\u5931\u8D25",data:e.series.map(function(a){return a.fail}),type:"bar",color:"#a5ceff",barMaxWidth:40,stack:e.title}],styles:{width:"50%",margin:"0 0 10px"}},e.title)}):(0,s.jsx)(s.Fragment,{})}):(0,s.jsx)(V.Z,{"data-inspector-line":"290","data-inspector-column":"10","data-inspector-relative-path":"src/pages/BusinessOperation/OperationalStatistics/index.tsx",description:"\u8BF7\u9009\u62E9\u5E94\u7528\u540E\u67E5\u770B\u6570\u636E"})]})})};g.default=nt}}]);
