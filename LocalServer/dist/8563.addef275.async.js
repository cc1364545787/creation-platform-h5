(self.webpackChunktomp=self.webpackChunktomp||[]).push([[8563],{60758:function(Te,G,s){"use strict";s.d(G,{Z:function(){return fr}});var L=s(20228),z=s(11382),Re=s(84305),H=s(69224),J=s(9715),k=s(86585),o=s(67294),ae=s(91200),Ce=s(26369),Ae=s(88306),Z=s(8880),we=s(72378),De=s.n(we),ue=s(74763);function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ie(Object(r),!0).forEach(function(n){Be(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Be(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?I=function(r){return typeof r}:I=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},I(e)}var Ie=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Object.keys(r).reduce(function(l,i){var c=r[i];return(0,ue.Z)(c)||(l[i]=c),l},{});if(Object.keys(a).length<1||I(t)!=="object"||(0,ue.Z)(t)||t instanceof Blob)return t;var u={},f=function l(i,c){var h={};return i==null||i===void 0?h:(Object.keys(i).forEach(function(v){var V=c?[c,v].flat(1):[v].flat(1),P=i[v],F=(0,Ae.Z)(a,V),y=function(){var O=typeof F=="function"?F==null?void 0:F(P,v,i):v;if(Array.isArray(O)){h=(0,Z.Z)(h,O,P);return}I(O)==="object"?u=oe(oe({},u),O):O&&(h=(0,Z.Z)(h,[O],P))};if(F&&typeof F=="function"&&y(),I(P)==="object"&&!Array.isArray(P)&&!o.isValidElement(P)&&!(P instanceof Blob)){var D=l(P,V);if(Object.keys(D).length<1)return;h=(0,Z.Z)(h,[v],D);return}y()}),n?h:i)};return u=De()({},f(t),u),u},Ze=Ie,le=s(40821);function se(e,t,r,n,a,u,f){try{var l=e[u](f),i=l.value}catch(c){r(c);return}l.done?t(i):Promise.resolve(i).then(n,a)}function Me(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var u=e.apply(t,r);function f(i){se(u,n,a,f,l,"next",i)}function l(i){se(u,n,a,f,l,"throw",i)}f(void 0)})}}function $e(e,t){return Ne(e)||xe(e,t)||Ue(e,t)||Ke()}function Ke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ue(e,t){if(!!e){if(typeof e=="string")return fe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fe(e,t)}}function fe(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xe(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],a=!0,u=!1,f,l;try{for(r=r.call(e);!(a=(f=r.next()).done)&&(n.push(f.value),!(t&&n.length===t));a=!0);}catch(i){u=!0,l=i}finally{try{!a&&r.return!=null&&r.return()}finally{if(u)throw l}}return n}}function Ne(e){if(Array.isArray(e))return e}var ce=0;function We(e){var t=(0,o.useState)(function(){return e.proFieldKey?e.proFieldKey.toString():(ce+=1,ce.toString())}),r=$e(t,1),n=r[0],a=(0,o.useRef)(n),u=function(){var h=Me(regeneratorRuntime.mark(function v(){var V,P;return regeneratorRuntime.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,(V=e.request)===null||V===void 0?void 0:V.call(e,e.params,e);case 2:return P=y.sent,y.abrupt("return",P);case 4:case"end":return y.stop()}},v)}));return function(){return h.apply(this,arguments)}}(),f=(0,o.useMemo)(function(){return e.params?[a.current,JSON.stringify(e.params)]:a.current},[e.params]),l=(0,le.ZP)(f,u,{revalidateOnFocus:!1,shouldRetryOnError:!1,revalidateOnReconnect:!1}),i=l.data,c=l.error;return[i||c,function(){(0,le.JG)(f)}]}var Ge=We,Le=s(22270),ze=s(56725),He=s(23312),Je=s(60249),ke=s(41036),Ye=s(45095),Qe=s(66758),Pr=s(49111),Xe=s(19650),Fr=s(57663),me=s(71577),ve=s(97435);function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ye(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?de(Object(r),!0).forEach(function(n){qe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(){return x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x.apply(this,arguments)}var _e=function(t){var r=(0,ae.YB)();if(t.render===!1)return null;var n=t.form,a=t.onSubmit,u=t.render,f=t.onReset,l=t.searchConfig,i=l===void 0?{}:l,c=t.submitButtonProps,h=t.resetButtonProps,v=h===void 0?{}:h,V=function(){n.submit(),a==null||a()},P=function(){n.resetFields(),requestAnimationFrame(function(){f==null||f()})},F=i.submitText,y=F===void 0?r.getMessage("tableForm.submit","\u63D0\u4EA4"):F,D=i.resetText,K=D===void 0?r.getMessage("tableForm.reset","\u91CD\u7F6E"):D,O=[];v!==!1&&O.push(o.createElement(me.Z,x({},(0,ve.Z)(v,["preventDefault"]),{key:"rest",onClick:function(U){var b;(v==null?void 0:v.preventDefault)||P(),v==null||(b=v.onClick)===null||b===void 0||b.call(v,U)}}),K)),c!==!1&&O.push(o.createElement(me.Z,x({type:"primary"},(0,ve.Z)(c||{},["preventDefault"]),{key:"submit",onClick:function(U){var b;(c==null?void 0:c.preventDefault)||V(),c==null||(b=c.onClick)===null||b===void 0||b.call(c,U)}}),y));var j=u?u(ye(ye({},t),{},{submit:V,reset:P}),O):O;return j?Array.isArray(j)?(j==null?void 0:j.length)<1?null:(j==null?void 0:j.length)===1?j[0]:o.createElement(Xe.Z,null,j):j:null},er=_e,ge=s(80334),rr=["children","contentRender","submitter","fieldProps","formItemProps","groupProps","dateFormatter","form","formRef","onInit","formComponentType","extraUrlParams","syncToUrl","syncToInitialValues","onReset","omitNil","isKeyPressSubmit"],tr=["request","params","initialValues"];function M(){return M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},M.apply(this,arguments)}function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pe(Object(r),!0).forEach(function(n){Y(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function be(e,t,r,n,a,u,f){try{var l=e[u](f),i=l.value}catch(c){r(c);return}l.done?t(i):Promise.resolve(i).then(n,a)}function he(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var u=e.apply(t,r);function f(i){be(u,n,a,f,l,"next",i)}function l(i){be(u,n,a,f,l,"throw",i)}f(void 0)})}}function $(e,t){return ir(e)||ur(e,t)||ar(e,t)||nr()}function nr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ar(e,t){if(!!e){if(typeof e=="string")return Pe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pe(e,t)}}function Pe(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ur(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],a=!0,u=!1,f,l;try{for(r=r.call(e);!(a=(f=r.next()).done)&&(n.push(f.value),!(t&&n.length===t));a=!0);}catch(i){u=!0,l=i}finally{try{!a&&r.return!=null&&r.return()}finally{if(u)throw l}}return n}}function ir(e){if(Array.isArray(e))return e}function Fe(e,t){if(e==null)return{};var r=or(e,t),n,a;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(a=0;a<u.length;a++)n=u[a],!(t.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,n)||(r[n]=e[n]))}return r}function or(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,u;for(u=0;u<n.length;u++)a=n[u],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}var Q=function(t,r,n){return t===!0?r:(0,Le.h)(t,r,n)};function lr(e){var t=e.children,r=e.contentRender,n=e.submitter,a=e.fieldProps,u=e.formItemProps,f=e.groupProps,l=e.dateFormatter,i=l===void 0?"string":l,c=e.form,h=e.formRef,v=e.onInit,V=e.formComponentType,P=e.extraUrlParams,F=P===void 0?{}:P,y=e.syncToUrl,D=e.syncToInitialValues,K=D===void 0?!0:D,O=e.onReset,j=e.omitNil,E=j===void 0?!0:j,U=e.isKeyPressSubmit,b=Fe(e,rr),cr=k.Z.useForm(),mr=$(cr,1),N=mr[0],vr=(0,Ye.l)({}),Oe=$(vr,2),X=Oe[0],W=Oe[1],T=(0,o.useRef)(c||N),q=(0,o.useRef)({}),_=(0,o.useRef)({}),dr=(0,ze.Z)(!1),Se=$(dr,2),ee=Se[0],re=Se[1],te=o.Children.toArray(t),B=(0,o.useMemo)(function(){return typeof n=="boolean"||!n?{}:n},[n]),R=(0,o.useCallback)(function(g,m,d){return Ze((0,He.ZP)(g,i,q.current,m,d),_.current,m)},[i]),ne=(0,o.useMemo)(function(){return{getFieldsFormatValue:function(m){return R(T.current.getFieldsValue(m),E)},getFieldFormatValue:function(m){return R(T.current.getFieldValue(m),E,m)},validateFieldsReturnFormatValue:function(){var g=he(regeneratorRuntime.mark(function d(C){var p;return regeneratorRuntime.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,T.current.validateFields(C);case 2:return p=A.sent,A.abrupt("return",R(p,E));case 4:case"end":return A.stop()}},d)}));function m(d){return g.apply(this,arguments)}return m}()}},[E,R]);(0,o.useImperativeHandle)(h,function(){return S(S({},T.current),ne)});var Ve=(0,o.useMemo)(function(){if(n!==!1)return o.createElement(er,M({key:"submitter"},B,{onReset:function(){var m,d=R(T.current.getFieldsValue(),E);if(B==null||(m=B.onReset)===null||m===void 0||m.call(B,d),O==null||O(d),y){var C=Object.keys(R(T.current.getFieldsValue(),!1)).reduce(function(p,w){return S(S({},p),{},Y({},w,d[w]||void 0))},F);W(Q(y,C,"set"))}},form:c||N,submitButtonProps:S({loading:ee},B.submitButtonProps)}))},[F,N,ee,E,O,W,n,B,y,R,c]),yr=(0,o.useMemo)(function(){return r?r(te,Ve,T.current):te},[r,te,Ve]),gr=(0,o.useMemo)(function(){if(V&&["DrawerForm","ModalForm"].includes(V))return function(g){return g.parentNode||document.body}},[V]);(0,o.useEffect)(function(){var g=R(T.current.getFieldsValue(!0),E);v==null||v(g)},[]);var pr=(0,o.useState)(function(){return y?Q(y,X,"get"):{}}),je=$(pr,2),br=je[0],hr=je[1];(0,o.useEffect)(function(){K||window.requestAnimationFrame(function(){hr({})})},[K]);var Ee=(0,Ce.Z)(e.initialValues);return(0,o.useEffect)(function(){if(!(y||!e.initialValues||!Ee||b.request)){var g=(0,Je.Z)(e.initialValues,Ee);(0,ge.ET)(g,"initialValues \u53EA\u5728 form \u521D\u59CB\u5316\u65F6\u751F\u6548\uFF0C\u5982\u679C\u4F60\u9700\u8981\u5F02\u6B65\u52A0\u8F7D\u63A8\u8350\u4F7F\u7528 request\uFF0C\u6216\u8005 initialValues ? <Form/> : null "),(0,ge.ET)(g,"The initialValues only take effect when the form is initialized, if you need to load asynchronously recommended request, or the initialValues ? <Form/> : null ")}},[e.initialValues]),(0,o.useEffect)(function(){!y||W(S(S({},X),F))},[F,y]),o.createElement(ae.oK,null,o.createElement(Qe.Z.Provider,{value:{formRef:T,fieldProps:a,formItemProps:u,groupProps:f,formComponentType:V,getPopupContainer:gr,setFieldValueType:function(m,d){var C=d.valueType,p=C===void 0?"text":C,w=d.dateFormat,A=d.transform;Array.isArray(m)&&(_.current=(0,Z.Z)(_.current,m,A),q.current=(0,Z.Z)(q.current,m,{valueType:p,dateFormat:w}))}}},o.createElement(ke.Z.Provider,{value:ne},o.createElement(H.ZP.SizeContext.Provider,{value:b.size},o.createElement(k.Z,M({onKeyPress:function(m){if(!!U&&m.key==="Enter"){var d;(d=T.current)===null||d===void 0||d.submit()}},form:c||N},b,{initialValues:S(S({},br),b.initialValues),onValuesChange:function(m,d){var C;b==null||(C=b.onValuesChange)===null||C===void 0||C.call(b,R(m,E),R(d,E))},onFinish:he(regeneratorRuntime.mark(function g(){var m,d;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(b.onFinish){p.next=2;break}return p.abrupt("return");case 2:if(!ee){p.next=4;break}return p.abrupt("return");case 4:return re(!0),p.prev=5,m=R(T.current.getFieldsValue(),E),p.next=9,b.onFinish(m);case 9:y&&(d=Object.keys(R(T.current.getFieldsValue(),!1)).reduce(function(w,A){return S(S({},w),{},Y({},A,m[A]||void 0))},F),Object.keys(X).forEach(function(w){d[w]||(d[w]=void 0)}),W(Q(y,d,"set"))),re(!1),p.next=16;break;case 13:p.prev=13,p.t0=p.catch(5),re(!1);case 16:case"end":return p.stop()}},g,null,[[5,13]])}))}),b.component!==!1&&o.createElement("input",{type:"text",style:{display:"none"}}),o.createElement(k.Z.Item,{noStyle:!0,shouldUpdate:!0},function(g){return h&&(h.current=S(S({},g),ne)),T.current=g,null}),yr)))))}function sr(e){var t=e.request,r=e.params,n=e.initialValues,a=Fe(e,tr),u=Ge({request:t,params:r}),f=$(u,1),l=f[0];return!l&&e.request?o.createElement("div",{style:{paddingTop:50,paddingBottom:50,textAlign:"center"}},o.createElement(z.Z,null)):o.createElement(lr,M({autoComplete:"off"},a,{initialValues:S(S({},n),l)}))}var fr=sr},26369:function(Te,G,s){"use strict";var L=s(67294),z=function(H){var J=(0,L.useRef)();return(0,L.useEffect)(function(){J.current=H}),J.current};G.Z=z}}]);
