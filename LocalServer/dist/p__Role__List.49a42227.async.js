(self.webpackChunktomp=self.webpackChunktomp||[]).push([[4126],{5966:function(L,P,e){"use strict";var l=e(67294),h=e(74308),_=["fieldProps","proFieldProps"],d=["fieldProps","proFieldProps"];function v(){return v=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])}return r},v.apply(this,arguments)}function R(r,t){if(r==null)return{};var a=y(r,t),s,o;if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(r);for(o=0;o<M.length;o++)s=M[o],!(t.indexOf(s)>=0)&&(!Object.prototype.propertyIsEnumerable.call(r,s)||(a[s]=r[s]))}return a}function y(r,t){if(r==null)return{};var a={},s=Object.keys(r),o,M;for(M=0;M<s.length;M++)o=s[M],!(t.indexOf(o)>=0)&&(a[o]=r[o]);return a}var O="text",f=function(t){var a=t.fieldProps,s=t.proFieldProps,o=R(t,_);return l.createElement(h.Z,v({mode:"edit",valueType:O,fieldProps:a,filedConfig:{valueType:O},proFieldProps:s},o))},c=function(t){var a=t.fieldProps,s=t.proFieldProps,o=R(t,d);return l.createElement(h.Z,v({mode:"edit",valueType:"password",fieldProps:a,proFieldProps:s,filedConfig:{valueType:O}},o))},i=f;i.Password=c,i.displayName="ProFormComponent",P.Z=i},37598:function(L,P,e){"use strict";var l=e(11849),h=e(22542),_=e(85893),d=function(R){var y={search:!1,options:!1,pagination:{defaultPageSize:15,pageSizeOptions:["15","30","50"],showSizeChanger:!0}};return(0,_.jsx)(h.ZP,(0,l.Z)({"data-inspector-line":"21","data-inspector-column":"9","data-inspector-relative-path":"src/components/CustomProTable/index.tsx"},Object.assign({},y,R)))};P.Z=d},69021:function(L,P,e){"use strict";var l=e(11849),h=e(37476),_=e(85893);function d(v){return(0,_.jsx)(h.Z,(0,l.Z)((0,l.Z)({"data-inspector-line":"6","data-inspector-column":"4","data-inspector-relative-path":"src/components/ModalForm/index.tsx"},v),{},{modalProps:(0,l.Z)((0,l.Z)({},v.modalProps),{maskClosable:!1,destroyOnClose:!0})}))}P.Z=d},86819:function(L,P,e){"use strict";e.r(P);var l=e(49111),h=e(19650),_=e(57663),d=e(71577),v=e(71194),R=e(5644),y=e(34792),O=e(48086),f=e(3182),c=e(9715),i=e(86585),r=e(2824),t=e(94043),a=e.n(t),s=e(67294),o=e(60625),M=e(49101),w=e(5966),$=e(69021),z=e(67265),V=e(37598),k=e(2489),p=e(85893),g;(function(x){x.Edit="Edit",x.Add="Add"})(g||(g={}));var G=function(){var J=(0,s.useState)(!1),W=(0,r.Z)(J,2),N=W[0],A=W[1],H=(0,s.useState)(g.Add),I=(0,r.Z)(H,2),B=I[0],K=I[1],Q=(0,s.useState)(),F=(0,r.Z)(Q,2),Z=F[0],S=F[1],X=i.Z.useForm(),Y=(0,r.Z)(X,1),U=Y[0],j=(0,s.useRef)(),q=function(u){k.m8.push("/user/role/auth/".concat(u.id,"/").concat(u.name))},ee=function(){var D=(0,f.Z)(a().mark(function u(){var m,E,b;return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,o.JV)({flag:0});case 3:return m=n.sent,E=m.data,b=m.total,n.abrupt("return",{data:E,success:!0,total:b});case 9:return n.prev=9,n.t0=n.catch(0),n.abrupt("return",{data:[],success:!1,total:0});case 12:case"end":return n.stop()}},u,null,[[0,9]])}));return function(){return D.apply(this,arguments)}}(),te=function(){U.resetFields(),K(g.Add),A(!0)},ne=function(u){S(u),U.setFieldsValue(u),K(g.Edit),A(!0)},re=function(){var D=(0,f.Z)(a().mark(function u(m){var E,b;return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(B!==g.Add){n.next=6;break}return n.next=3,(0,o._d)(m);case 3:E=n.sent,n.next=9;break;case 6:return n.next=8,(0,o.ul)(Z==null?void 0:Z.id,m);case 8:E=n.sent;case 9:E.code===0?(O.default.success("\u64CD\u4F5C\u6210\u529F"),A(!1),U.resetFields(),(b=j.current)===null||b===void 0||b.reload(),S(void 0)):E.msg&&O.default.error(E.msg);case 10:case"end":return n.stop()}},u)}));return function(m){return D.apply(this,arguments)}}(),ae=function(u){R.Z.confirm({title:"\u63D0\u793A",okButtonProps:{danger:!0},okText:"\u5220\u9664",content:(0,p.jsxs)("div",{"data-inspector-line":"86","data-inspector-column":"8","data-inspector-relative-path":"src/pages/Role/List/index.tsx",children:["\u786E\u8BA4\u5220\u9664",(0,p.jsx)("span",{"data-inspector-line":"87","data-inspector-column":"14","data-inspector-relative-path":"src/pages/Role/List/index.tsx",style:{color:"red"},children:u.name}),"?"]}),onOk:function(){var m=(0,f.Z)(a().mark(function b(){var C,n;return a().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,(0,o.Rd)(u.id);case 2:n=T.sent,n.code===0?O.default.success("\u64CD\u4F5C\u6210\u529F"):n.msg&&O.default.error(n.msg),(C=j.current)===null||C===void 0||C.reload();case 5:case"end":return T.stop()}},b)}));function E(){return m.apply(this,arguments)}return E}()})},se=[{title:"\u89D2\u8272",dataIndex:"name",key:"name"},{title:"\u64CD\u4F5C",key:"op",align:"center",width:180,render:function(u,m){return(0,p.jsxs)(h.Z,{"data-inspector-line":"115","data-inspector-column":"8","data-inspector-relative-path":"src/pages/Role/List/index.tsx",size:"middle",children:[(0,p.jsx)(d.Z,{"data-inspector-line":"116","data-inspector-column":"10","data-inspector-relative-path":"src/pages/Role/List/index.tsx",type:"link",onClick:function(){return q(m)},children:"\u6743\u9650\u8BBE\u7F6E"}),m.id===-1?null:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(d.Z,{"data-inspector-line":"121","data-inspector-column":"14","data-inspector-relative-path":"src/pages/Role/List/index.tsx",type:"link",onClick:function(){return ne(m)},children:"\u7F16\u8F91"}),(0,p.jsx)(d.Z,{"data-inspector-line":"124","data-inspector-column":"14","data-inspector-relative-path":"src/pages/Role/List/index.tsx",type:"link",onClick:function(){return ae(m)},children:"\u5220\u9664"})]})]})}}];return(0,p.jsxs)(z.ZP,{"data-inspector-line":"135","data-inspector-column":"4","data-inspector-relative-path":"src/pages/Role/List/index.tsx",children:[(0,p.jsx)(V.Z,{"data-inspector-line":"136","data-inspector-column":"6","data-inspector-relative-path":"src/pages/Role/List/index.tsx",actionRef:j,columns:se,rowKey:"id",request:ee,search:!1,options:!1,toolBarRender:function(){return[(0,p.jsx)(d.Z,{"data-inspector-line":"144","data-inspector-column":"10","data-inspector-relative-path":"src/pages/Role/List/index.tsx",icon:(0,p.jsx)(M.Z,{"data-inspector-line":"144","data-inspector-column":"37","data-inspector-relative-path":"src/pages/Role/List/index.tsx"}),type:"primary",onClick:te,children:"\u521B\u5EFA\u89D2\u8272"},"button")]},pagination:{pageSize:15,pageSizeOptions:["15","30","50"]}}),(0,p.jsx)($.Z,{"data-inspector-line":"153","data-inspector-column":"6","data-inspector-relative-path":"src/pages/Role/List/index.tsx",title:B===g.Edit?"\u7F16\u8F91\u89D2\u8272":"\u521B\u5EFA\u89D2\u8272",width:480,form:U,layout:"horizontal",visible:N,modalProps:{okText:B===g.Edit?"\u4FDD\u5B58":"\u521B\u5EFA"},onVisibleChange:A,onFinish:re,children:(0,p.jsx)(w.Z,{"data-inspector-line":"165","data-inspector-column":"8","data-inspector-relative-path":"src/pages/Role/List/index.tsx",name:"name",label:"\u89D2\u8272\u540D",required:!0,fieldProps:{maxLength:15},rules:[{required:!0}]})})]})};P.default=G},60625:function(L,P,e){"use strict";e.d(P,{JV:function(){return v},_d:function(){return R},ul:function(){return y},Rd:function(){return O}});var l=e(3182),h=e(94043),_=e.n(h),d=e(58075),v=function(){var f=(0,l.Z)(_().mark(function c(i){return _().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.ZP)("/system/roles/list/".concat(i.flag),{method:"GET"}));case 1:case"end":return t.stop()}},c)}));return function(i){return f.apply(this,arguments)}}(),R=function(){var f=(0,l.Z)(_().mark(function c(i){return _().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.ZP)("/system/roles",{method:"POST",data:i}));case 1:case"end":return t.stop()}},c)}));return function(i){return f.apply(this,arguments)}}(),y=function(){var f=(0,l.Z)(_().mark(function c(i,r){return _().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,d.ZP)("/system/roles/".concat(i),{method:"PUT",data:r}));case 1:case"end":return a.stop()}},c)}));return function(i,r){return f.apply(this,arguments)}}(),O=function(){var f=(0,l.Z)(_().mark(function c(i){return _().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,d.ZP)("/system/roles/".concat(i),{method:"DELETE"}));case 1:case"end":return t.stop()}},c)}));return function(i){return f.apply(this,arguments)}}()}}]);
