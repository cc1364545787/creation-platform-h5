(self.webpackChunktomp=self.webpackChunktomp||[]).push([[877],{38205:function(D,C,a){"use strict";a.d(C,{i:function(){return M},Z:function(){return v}});var f=a(2824),m=a(67294),o=a(91739),c=function(e,s){var n={rule:[{kind:9,range:e,label:"rule.required",insertText:"required",detail:"\u5FC5\u586B"},{kind:9,range:e,label:"rule.len",insertText:"len",detail:"\u957F\u5EA6"},{kind:9,range:e,label:"rule.minLen",insertText:"minLen",detail:"\u6700\u5C0F\u957F\u5EA6"},{kind:9,range:e,label:"rule.maxLen",insertText:"maxLen",detail:"\u6700\u5927\u957F\u5EA6"},{kind:9,range:e,label:"rule.in",insertText:"in",detail:"\u8303\u56F4\u503C"},{kind:9,range:e,label:"rule.label",insertText:"label",detail:"\u8303\u56F4\u6587\u672C"},{kind:9,range:e,label:"rule.minPairs",insertText:"minPairs",detail:"map\u6700\u5C11\u9879"},{kind:9,range:e,label:"rule.maxPairs",insertText:"maxPairs",detail:"map\u6700\u591A\u9879"},{kind:9,range:e,label:"rule.minItems",insertText:"minItems",detail:"list\u6700\u5C11\u9879"},{kind:9,range:e,label:"rule.maxItems",insertText:"maxItems",detail:"list\u6700\u591A\u9879"}],type:[{kind:9,range:e,label:"type.int",insertText:"int",detail:"\u6574\u578B"},{kind:9,range:e,label:"type.float",insertText:"float",detail:"\u6D6E\u70B9\u578B"},{kind:9,range:e,label:"type.string",insertText:"string",detail:"\u5B57\u7B26\u4E32"},{kind:9,range:e,label:"type.bool",insertText:"bool",detail:"\u5E03\u5C14\u578B"},{kind:9,range:e,label:"type.list",insertText:"list",detail:"\u5217\u8868\u6570\u636E"},{kind:9,range:e,label:"type.object",insertText:"object",detail:"\u5BF9\u8C61\u6570\u636E"},{kind:9,range:e,label:"type.map",insertText:"map",detail:"map\u6570\u636E"}],mapKeyType:[{kind:9,range:e,label:"string",insertText:"string",detail:"string"}],default:[{kind:9,range:e,label:"type",insertText:"type",detail:"type"},{kind:9,range:e,label:"rule",insertText:"rule",detail:"rule"},{kind:9,range:e,label:"value",insertText:"value",detail:"value"},{kind:9,range:e,label:"listType",insertText:"listType",detail:"listType"},{kind:9,range:e,label:"mapKeyType",insertText:"mapKeyType",detail:"mapKeyType"},{kind:9,range:e,label:"mapValueType",insertText:"mapValueType",detail:"mapValueType"}]};return s&&n[s]||n.default},h=a(85893);self.MonacoEnvironment={getWorkerUrl:function(e,s){return s==="json"?"/json.worker.bundle.js":s==="css"||s==="scss"||s==="less"?"/css.worker.bundle.js":s==="html"||s==="handlebars"||s==="razor"?"/html.worker.bundle.js":s==="typescript"||s==="javascript"?"/ts.worker.bundle.js":"/editor.worker.bundle.js"}};var y=function(e,s){var n=(0,m.createRef)(),t=(0,m.useState)(),r=(0,f.Z)(t,2),l=r[0],i=r[1];return(0,m.useImperativeHandle)(s,function(){return l}),(0,m.useEffect)(function(){var u=e.value,_=u===void 0?"":u,x=e.language,I=x===void 0?"json":x,d=e.config,O=d===void 0?{value:_,language:I,autoClosingBrackets:"always",wordWrap:"on",theme:"vs-dark",contextmenu:!1,minimap:{enabled:!1},fontSize:12,fixedOverflowWidgets:!0}:d,P=e.override;if(n.current){var T=o.editor.create(n.current,O,P);T.onDidChangeModelContent(function(){var b;e==null||(b=e.onChange)===null||b===void 0||b.call(e,T.getValue())}),i(T)}else console.log("editorRef not exsit");return function(){l==null||l.dispose()}},[]),(0,h.jsx)("div",{"data-inspector-line":"78","data-inspector-column":"4","data-inspector-relative-path":"src/components/Editor/index.tsx",className:"props.overlayClassName",style:e.style,children:(0,h.jsx)("div",{"data-inspector-line":"79","data-inspector-column":"6","data-inspector-relative-path":"src/components/Editor/index.tsx",ref:n,style:{height:e.height||window.innerHeight}})})},M=function(){o.languages.registerCompletionItemProvider("json",{provideCompletionItems:function(s,n){var t=s.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:n.lineNumber,endColumn:n.column});console.log("rangeValue:",t);var r=s.getWordUntilPosition(n),l={startLineNumber:n.lineNumber,endLineNumber:n.lineNumber,startColumn:r.startColumn,endColumn:r.endColumn};return/"rule":?\s\{[^}]*$/.test(t)?{suggestions:c(l,"rule")}:/"(type|listType|listType|mapValueType)":\s*?"\s*$/.test(t)?(console.log('/"(type)|(listType)|(listType)|(mapValueType)":s*$'),{suggestions:c(l,"type")}):/"mapKeyType":\s*?"\s*$/.test(t)?{suggestions:c(l,"mapKeyType")}:{suggestions:c(l)}},triggerCharacters:['"',":"," "]})},v=(0,m.forwardRef)(y)},46558:function(D,C,a){"use strict";a.r(C);var f=a(58024),m=a(39144),o=a(89032),c=a(15746),h=a(57663),y=a(71577),M=a(34792),v=a(48086),p=a(11849),e=a(9715),s=a(86585),n=a(2824),t=a(67294),r=a(2489),l=a(67265),i=a(38205),u=a(8179),_=a(85893);(0,i.i)();var x=function(){var d=r.m8.location.query,O=s.Z.useForm(),P=(0,n.Z)(O,1),T=P[0],b=(0,t.useState)(!1),k=(0,n.Z)(b,2),Z=k[0],L=k[1],V=(0,t.useState)(!1),j=(0,n.Z)(V,2),B=j[0],U=j[1],$=(0,t.useState)({}),K=(0,n.Z)($,2),w=K[0],N=K[1],F=(0,t.useState)("\u4FEE\u6539\u6A21\u677F"),R=(0,n.Z)(F,2),H=R[0],G=R[1],z=(0,t.useState)(),A=(0,n.Z)(z,2),X=A[0],J=A[1],W=function(){r.m8.goBack()},Q=function(){B||T.validateFields().then(function(g){U(!0),(0,u.M$)(Number(d==null?void 0:d.configId),(0,p.Z)((0,p.Z)({},g),{},{id:Number(d==null?void 0:d.configId)})).then(function(S){S.code===0?(v.default.success("\u4FEE\u6539\u6210\u529F"),W()):S.msg&&v.default.error(S.msg)}).catch(function(S){v.default.error(S)}).finally(function(){U(!1)})}).catch(function(g){console.error(g,"error")})};return(0,t.useEffect)(function(){return L(!0),(0,u.xV)(d==null?void 0:d.configId).then(function(E){if(E.code===0){var g=E.data;g&&(N({configTpl:g.configTpl,configValue:g.configValue}),G(g.serviceName),J(g.serviceDesc))}else E.msg&&v.default.error(E.msg)}).catch(function(E){v.default.error(E)}).finally(function(){L(!1)}),function(){}},[d]),(0,_.jsx)(l.ZP,{"data-inspector-line":"89","data-inspector-column":"4","data-inspector-relative-path":"src/pages/ConfigMaintian/ServiceConfig/Edit.tsx",fixedHeader:!0,loading:Z,onBack:W,extra:[(0,_.jsx)(y.Z,{"data-inspector-line":"94","data-inspector-column":"8","data-inspector-relative-path":"src/pages/ConfigMaintian/ServiceConfig/Edit.tsx",loading:B,type:"primary",onClick:Q,children:"\u4FDD\u5B58"},"save")],title:H,content:(0,_.jsx)(c.Z,{"data-inspector-line":"99","data-inspector-column":"15","data-inspector-relative-path":"src/pages/ConfigMaintian/ServiceConfig/Edit.tsx",style:{color:"#333"},children:X}),children:(0,_.jsx)(m.Z,{"data-inspector-line":"101","data-inspector-column":"6","data-inspector-relative-path":"src/pages/ConfigMaintian/ServiceConfig/Edit.tsx",children:(0,_.jsxs)(s.Z,{"data-inspector-line":"102","data-inspector-column":"8","data-inspector-relative-path":"src/pages/ConfigMaintian/ServiceConfig/Edit.tsx",form:T,initialValues:w,children:[(0,_.jsx)(s.Z.Item,{"data-inspector-line":"103","data-inspector-column":"10","data-inspector-relative-path":"src/pages/ConfigMaintian/ServiceConfig/Edit.tsx",label:"\u914D\u7F6E\u6A21\u677F",name:"configTpl",children:(0,_.jsx)(i.Z,{"data-inspector-line":"105","data-inspector-column":"12","data-inspector-relative-path":"src/pages/ConfigMaintian/ServiceConfig/Edit.tsx",height:400,language:"json"})},"configTpl"),(0,_.jsx)(s.Z.Item,{"data-inspector-line":"107","data-inspector-column":"10","data-inspector-relative-path":"src/pages/ConfigMaintian/ServiceConfig/Edit.tsx",label:"\u914D\u7F6E\u5185\u5BB9",name:"configValue",children:(0,_.jsx)(i.Z,{"data-inspector-line":"109","data-inspector-column":"12","data-inspector-relative-path":"src/pages/ConfigMaintian/ServiceConfig/Edit.tsx",height:400,language:"json"})},"configValue")]})})})};C.default=x},8179:function(D,C,a){"use strict";a.d(C,{Xe:function(){return h},ev:function(){return y},xV:function(){return M},uN:function(){return v},M$:function(){return p},Sc:function(){return e},Bm:function(){return s}});var f=a(3182),m=a(94043),o=a.n(m),c=a(58075),h=function(){var n=(0,f.Z)(o().mark(function t(r){return o().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,c.kO)("/soms/service/config/list",{method:"GET",params:r}));case 1:case"end":return i.stop()}},t)}));return function(r){return n.apply(this,arguments)}}(),y=function(){var n=(0,f.Z)(o().mark(function t(r){return o().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,c.kO)("/soms/service/config/histories",{method:"GET",params:r}));case 1:case"end":return i.stop()}},t)}));return function(r){return n.apply(this,arguments)}}(),M=function(){var n=(0,f.Z)(o().mark(function t(r){return o().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,c.kO)("/soms/service/config/".concat(r),{method:"GET"}));case 1:case"end":return i.stop()}},t)}));return function(r){return n.apply(this,arguments)}}(),v=function(){var n=(0,f.Z)(o().mark(function t(r){return o().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,c.kO)("/soms/service/config/",{method:"POST",data:r}));case 1:case"end":return i.stop()}},t)}));return function(r){return n.apply(this,arguments)}}(),p=function(){var n=(0,f.Z)(o().mark(function t(r,l){return o().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,c.kO)("/soms/service/config/tpl/".concat(r),{method:"POST",data:l}));case 1:case"end":return u.stop()}},t)}));return function(r,l){return n.apply(this,arguments)}}(),e=function(){var n=(0,f.Z)(o().mark(function t(r,l){return o().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",(0,c.kO)("/soms/service/config/value/".concat(r),{method:"POST",data:l}));case 1:case"end":return u.stop()}},t)}));return function(r,l){return n.apply(this,arguments)}}(),s=function(){var n=(0,f.Z)(o().mark(function t(r){return o().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,c.kO)("/soms/service/config/rollback/".concat(r),{method:"POST",data:{id:r}}));case 1:case"end":return i.stop()}},t)}));return function(r){return n.apply(this,arguments)}}()}}]);
