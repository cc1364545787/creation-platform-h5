(self.webpackChunktomp=self.webpackChunktomp||[]).push([[9932],{38205:function(P,g,t){"use strict";t.d(g,{i:function(){return y},Z:function(){return _}});var p=t(2824),m=t(67294),o=t(91739),d=function(e,s){var a={rule:[{kind:9,range:e,label:"rule.required",insertText:"required",detail:"\u5FC5\u586B"},{kind:9,range:e,label:"rule.len",insertText:"len",detail:"\u957F\u5EA6"},{kind:9,range:e,label:"rule.minLen",insertText:"minLen",detail:"\u6700\u5C0F\u957F\u5EA6"},{kind:9,range:e,label:"rule.maxLen",insertText:"maxLen",detail:"\u6700\u5927\u957F\u5EA6"},{kind:9,range:e,label:"rule.in",insertText:"in",detail:"\u8303\u56F4\u503C"},{kind:9,range:e,label:"rule.label",insertText:"label",detail:"\u8303\u56F4\u6587\u672C"},{kind:9,range:e,label:"rule.minPairs",insertText:"minPairs",detail:"map\u6700\u5C11\u9879"},{kind:9,range:e,label:"rule.maxPairs",insertText:"maxPairs",detail:"map\u6700\u591A\u9879"},{kind:9,range:e,label:"rule.minItems",insertText:"minItems",detail:"list\u6700\u5C11\u9879"},{kind:9,range:e,label:"rule.maxItems",insertText:"maxItems",detail:"list\u6700\u591A\u9879"}],type:[{kind:9,range:e,label:"type.int",insertText:"int",detail:"\u6574\u578B"},{kind:9,range:e,label:"type.float",insertText:"float",detail:"\u6D6E\u70B9\u578B"},{kind:9,range:e,label:"type.string",insertText:"string",detail:"\u5B57\u7B26\u4E32"},{kind:9,range:e,label:"type.bool",insertText:"bool",detail:"\u5E03\u5C14\u578B"},{kind:9,range:e,label:"type.list",insertText:"list",detail:"\u5217\u8868\u6570\u636E"},{kind:9,range:e,label:"type.object",insertText:"object",detail:"\u5BF9\u8C61\u6570\u636E"},{kind:9,range:e,label:"type.map",insertText:"map",detail:"map\u6570\u636E"}],mapKeyType:[{kind:9,range:e,label:"string",insertText:"string",detail:"string"}],default:[{kind:9,range:e,label:"type",insertText:"type",detail:"type"},{kind:9,range:e,label:"rule",insertText:"rule",detail:"rule"},{kind:9,range:e,label:"value",insertText:"value",detail:"value"},{kind:9,range:e,label:"listType",insertText:"listType",detail:"listType"},{kind:9,range:e,label:"mapKeyType",insertText:"mapKeyType",detail:"mapKeyType"},{kind:9,range:e,label:"mapValueType",insertText:"mapValueType",detail:"mapValueType"}]};return s&&a[s]||a.default},C=t(85893);self.MonacoEnvironment={getWorkerUrl:function(e,s){return s==="json"?"/json.worker.bundle.js":s==="css"||s==="scss"||s==="less"?"/css.worker.bundle.js":s==="html"||s==="handlebars"||s==="razor"?"/html.worker.bundle.js":s==="typescript"||s==="javascript"?"/ts.worker.bundle.js":"/editor.worker.bundle.js"}};var h=function(e,s){var a=(0,m.createRef)(),r=(0,m.useState)(),i=(0,p.Z)(r,2),l=i[0],n=i[1];return(0,m.useImperativeHandle)(s,function(){return l}),(0,m.useEffect)(function(){var c=e.value,u=c===void 0?"":c,x=e.language,S=x===void 0?"json":x,b=e.config,M=b===void 0?{value:u,language:S,autoClosingBrackets:"always",wordWrap:"on",theme:"vs-dark",contextmenu:!1,minimap:{enabled:!1},fontSize:12,fixedOverflowWidgets:!0}:b,D=e.override;if(a.current){var v=o.editor.create(a.current,M,D);v.onDidChangeModelContent(function(){var E;e==null||(E=e.onChange)===null||E===void 0||E.call(e,v.getValue())}),n(v)}else console.log("editorRef not exsit");return function(){l==null||l.dispose()}},[]),(0,C.jsx)("div",{"data-inspector-line":"78","data-inspector-column":"4","data-inspector-relative-path":"src/components/Editor/index.tsx",className:"props.overlayClassName",style:e.style,children:(0,C.jsx)("div",{"data-inspector-line":"79","data-inspector-column":"6","data-inspector-relative-path":"src/components/Editor/index.tsx",ref:a,style:{height:e.height||window.innerHeight}})})},y=function(){o.languages.registerCompletionItemProvider("json",{provideCompletionItems:function(s,a){var r=s.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:a.lineNumber,endColumn:a.column});console.log("rangeValue:",r);var i=s.getWordUntilPosition(a),l={startLineNumber:a.lineNumber,endLineNumber:a.lineNumber,startColumn:i.startColumn,endColumn:i.endColumn};return/"rule":?\s\{[^}]*$/.test(r)?{suggestions:d(l,"rule")}:/"(type|listType|listType|mapValueType)":\s*?"\s*$/.test(r)?(console.log('/"(type)|(listType)|(listType)|(mapValueType)":s*$'),{suggestions:d(l,"type")}):/"mapKeyType":\s*?"\s*$/.test(r)?{suggestions:d(l,"mapKeyType")}:{suggestions:d(l)}},triggerCharacters:['"',":"," "]})},_=(0,m.forwardRef)(h)},4122:function(P,g,t){"use strict";t.r(g);var p=t(58024),m=t(39144),o=t(47673),d=t(4107),C=t(57663),h=t(71577),y=t(34792),_=t(48086),f=t(11849),e=t(9715),s=t(86585),a=t(2824),r=t(67294),i=t(19630),l=t(8179),n=t(67265),c=t(38205),u=t(85893);(0,c.i)();var x=function(){var b=(0,i.k6)(),M=s.Z.useForm(),D=(0,a.Z)(M,1),v=D[0],E=(0,r.useState)(!1),A=(0,a.Z)(E,2),j=A[0],I=A[1],B=function(){b.goBack()},k=function(){j||v.validateFields().then(function(O){I(!0),(0,l.uN)((0,f.Z)({},O)).then(function(T){T.code===0?(_.default.success("\u65B0\u589E\u6210\u529F"),B()):T.msg&&_.default.error(T.msg)}).catch(function(T){_.default.error(T)}).finally(function(){I(!1)})}).catch(function(O){console.error(O,"error")})};return(0,u.jsx)(n.ZP,{"data-inspector-line":"49","data-inspector-column":"4","data-inspector-relative-path":"src/pages/ConfigMaintian/ServiceConfig/Add.tsx",fixedHeader:!0,onBack:B,title:"\u65B0\u589E\u670D\u52A1",extra:[(0,u.jsx)(h.Z,{"data-inspector-line":"54","data-inspector-column":"8","data-inspector-relative-path":"src/pages/ConfigMaintian/ServiceConfig/Add.tsx",loading:j,type:"primary",onClick:k,children:"\u4FDD\u5B58"},"save")],children:(0,u.jsx)(m.Z,{"data-inspector-line":"59","data-inspector-column":"6","data-inspector-relative-path":"src/pages/ConfigMaintian/ServiceConfig/Add.tsx",children:(0,u.jsx)(m.Z,{"data-inspector-line":"60","data-inspector-column":"8","data-inspector-relative-path":"src/pages/ConfigMaintian/ServiceConfig/Add.tsx",style:{margin:"0 0 16px"},bodyStyle:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",paddingBottom:0},bordered:!1,children:(0,u.jsxs)(s.Z,{"data-inspector-line":"71","data-inspector-column":"10","data-inspector-relative-path":"src/pages/ConfigMaintian/ServiceConfig/Add.tsx",form:v,style:{width:"100%"},children:[(0,u.jsx)(s.Z.Item,{"data-inspector-line":"72","data-inspector-column":"12","data-inspector-relative-path":"src/pages/ConfigMaintian/ServiceConfig/Add.tsx",name:"serviceName",label:"\u670D\u52A1\u540D\u79F0",rules:[{required:!0},{pattern:/^[0-9a-zA-Z-_]*$/,message:"\u670D\u52A1\u540D\u79F0\u53EA\u80FD\u5305\u542B\u6570\u5B57\u3001\u5B57\u6BCD\u3001-\u3001_"}],children:(0,u.jsx)(d.Z,{"data-inspector-line":"81","data-inspector-column":"14","data-inspector-relative-path":"src/pages/ConfigMaintian/ServiceConfig/Add.tsx",placeholder:"\u8BF7\u8F93\u5165\u670D\u52A1\u540D\u79F0",maxLength:20})},"serviceName"),(0,u.jsx)(s.Z.Item,{"data-inspector-line":"83","data-inspector-column":"12","data-inspector-relative-path":"src/pages/ConfigMaintian/ServiceConfig/Add.tsx",name:"serviceDesc",label:"\u670D\u52A1\u63CF\u8FF0",rules:[{required:!0}],children:(0,u.jsx)(d.Z,{"data-inspector-line":"89","data-inspector-column":"14","data-inspector-relative-path":"src/pages/ConfigMaintian/ServiceConfig/Add.tsx",placeholder:"\u8BF7\u8F93\u5165\u670D\u52A1\u63CF\u8FF0",maxLength:50})},"serviceDesc"),(0,u.jsx)(s.Z.Item,{"data-inspector-line":"91","data-inspector-column":"12","data-inspector-relative-path":"src/pages/ConfigMaintian/ServiceConfig/Add.tsx",name:"serviceKey",label:"ETCD\u952E",rules:[{required:!0},{pattern:/^[0-9a-zA-Z/\._-]*$/,message:"ETCD\u952E\u53EA\u80FD\u5305\u542B\u6570\u5B57\u3001\u5B57\u6BCD\u3001/\u3001.\u3001-\u3001_"}],children:(0,u.jsx)(d.Z,{"data-inspector-line":"103","data-inspector-column":"14","data-inspector-relative-path":"src/pages/ConfigMaintian/ServiceConfig/Add.tsx",placeholder:"\u8BF7\u8F93\u5165ETCD\u952E",maxLength:200})},"serviceKey"),(0,u.jsx)(s.Z.Item,{"data-inspector-line":"105","data-inspector-column":"12","data-inspector-relative-path":"src/pages/ConfigMaintian/ServiceConfig/Add.tsx",name:"configTpl",label:"\u914D\u7F6E\u6A21\u677F",rules:[{required:!0}],children:(0,u.jsx)(c.Z,{"data-inspector-line":"111","data-inspector-column":"14","data-inspector-relative-path":"src/pages/ConfigMaintian/ServiceConfig/Add.tsx",height:400,language:"json"})},"configTpl"),(0,u.jsx)(s.Z.Item,{"data-inspector-line":"113","data-inspector-column":"12","data-inspector-relative-path":"src/pages/ConfigMaintian/ServiceConfig/Add.tsx",name:"configValue",label:"\u914D\u7F6E\u5185\u5BB9",rules:[{required:!0}],children:(0,u.jsx)(c.Z,{"data-inspector-line":"119","data-inspector-column":"14","data-inspector-relative-path":"src/pages/ConfigMaintian/ServiceConfig/Add.tsx",height:400,language:"json"})},"configValue")]})})})})};g.default=x},8179:function(P,g,t){"use strict";t.d(g,{Xe:function(){return C},ev:function(){return h},xV:function(){return y},uN:function(){return _},M$:function(){return f},Sc:function(){return e},Bm:function(){return s}});var p=t(3182),m=t(94043),o=t.n(m),d=t(58075),C=function(){var a=(0,p.Z)(o().mark(function r(i){return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,d.kO)("/soms/service/config/list",{method:"GET",params:i}));case 1:case"end":return n.stop()}},r)}));return function(i){return a.apply(this,arguments)}}(),h=function(){var a=(0,p.Z)(o().mark(function r(i){return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,d.kO)("/soms/service/config/histories",{method:"GET",params:i}));case 1:case"end":return n.stop()}},r)}));return function(i){return a.apply(this,arguments)}}(),y=function(){var a=(0,p.Z)(o().mark(function r(i){return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,d.kO)("/soms/service/config/".concat(i),{method:"GET"}));case 1:case"end":return n.stop()}},r)}));return function(i){return a.apply(this,arguments)}}(),_=function(){var a=(0,p.Z)(o().mark(function r(i){return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,d.kO)("/soms/service/config/",{method:"POST",data:i}));case 1:case"end":return n.stop()}},r)}));return function(i){return a.apply(this,arguments)}}(),f=function(){var a=(0,p.Z)(o().mark(function r(i,l){return o().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,d.kO)("/soms/service/config/tpl/".concat(i),{method:"POST",data:l}));case 1:case"end":return c.stop()}},r)}));return function(i,l){return a.apply(this,arguments)}}(),e=function(){var a=(0,p.Z)(o().mark(function r(i,l){return o().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",(0,d.kO)("/soms/service/config/value/".concat(i),{method:"POST",data:l}));case 1:case"end":return c.stop()}},r)}));return function(i,l){return a.apply(this,arguments)}}(),s=function(){var a=(0,p.Z)(o().mark(function r(i){return o().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,d.kO)("/soms/service/config/rollback/".concat(i),{method:"POST",data:{id:i}}));case 1:case"end":return n.stop()}},r)}));return function(i){return a.apply(this,arguments)}}()}}]);
